{"ast":null,"code":"import axios from 'axios';\nimport { callGemini } from '../utils/gemini';\nconst express = require('express');\nconst cors = require('cors');\nconst app = express();\nclass FlightSearchService {\n  constructor() {\n    this.serpApiKey = \"0a9b0abe47e6107ce612664a0e582e40fc7cc91bdd1b42181cd56b2073c83fa0\";\n    this.backendUrl = 'http://localhost:8000';\n  }\n  async searchFlights(params) {\n    console.log('Searching flights with params:', params);\n\n    // Try SerpAPI first\n    if (this.serpApiKey) {\n      try {\n        const serpResults = await this.searchWithSerpAPI(params);\n        if (serpResults.length > 0) {\n          console.log('SerpAPI results found:', serpResults.length);\n          return serpResults;\n        } else console.warn('Serp Result length is zero');\n      } catch (error) {\n        console.warn('SerpAPI failed:', error);\n      }\n    } else {\n      console.warn('Problem with serpApi key');\n    }\n    ;\n\n    // Try backend scraping\n    try {\n      const scrapingResults = await this.searchWithBackendScraping(params);\n      if (scrapingResults.length > 0) {\n        console.log('Backend scraping results found:', scrapingResults.length);\n        return scrapingResults;\n      }\n    } catch (error) {\n      console.warn('Backend scraping failed:', error);\n    }\n\n    // If all methods fail, return empty array (no fallback data)\n    console.log('All flight search methods failed');\n    return [];\n  }\n  async searchWithSerpAPI(params) {\n    const departureId = await this.getAirportCode(params.origin);\n    const arrivalId = await this.getAirportCode(params.destination);\n    const serpParams = {\n      engine: 'google_flights',\n      departure_id: departureId,\n      arrival_id: arrivalId,\n      outbound_date: params.departureDate,\n      return_date: params.returnDate,\n      currency: 'INR',\n      hl: 'en',\n      api_key: this.serpApiKey\n    };\n    const response = await axios.get('https://serpapi.com/search', {\n      params: serpParams,\n      timeout: 10000\n    });\n    if (response.data.best_flights) {\n      return this.formatSerpAPIResults(response.data.best_flights);\n    }\n    return [];\n  }\n  async searchWithBackendScraping(params) {\n    const response = await axios.post(`${this.backendUrl}/api/v1/flights/search`, {\n      origin: params.origin,\n      destination: params.destination,\n      date: params.departureDate,\n      passengers: params.passengers || 1,\n      class: params.class || 'economy'\n    }, {\n      timeout: 15000\n    });\n    if (response.data.success && response.data.flight_results) {\n      return this.formatBackendResults(response.data.flight_results, params);\n    }\n    return [];\n  }\n  formatSerpAPIResults(flights) {\n    return flights.map((flight, index) => {\n      var _flight$flights$, _flight$flights$2, _flight$price, _flight$flights$3, _flight$flights$3$dep, _flight$flights$4, _flight$flights$4$arr, _flight$flights;\n      return {\n        id: `serp_${index}`,\n        airline: ((_flight$flights$ = flight.flights[0]) === null || _flight$flights$ === void 0 ? void 0 : _flight$flights$.airline) || 'Unknown',\n        flightNumber: ((_flight$flights$2 = flight.flights[0]) === null || _flight$flights$2 === void 0 ? void 0 : _flight$flights$2.flight_number) || 'N/A',\n        price: `₹${((_flight$price = flight.price) === null || _flight$price === void 0 ? void 0 : _flight$price.toLocaleString()) || 'N/A'}`,\n        departureTime: ((_flight$flights$3 = flight.flights[0]) === null || _flight$flights$3 === void 0 ? void 0 : (_flight$flights$3$dep = _flight$flights$3.departure_airport) === null || _flight$flights$3$dep === void 0 ? void 0 : _flight$flights$3$dep.time) || 'N/A',\n        arrivalTime: ((_flight$flights$4 = flight.flights[0]) === null || _flight$flights$4 === void 0 ? void 0 : (_flight$flights$4$arr = _flight$flights$4.arrival_airport) === null || _flight$flights$4$arr === void 0 ? void 0 : _flight$flights$4$arr.time) || 'N/A',\n        duration: flight.total_duration || 'N/A',\n        stops: ((_flight$flights = flight.flights) === null || _flight$flights === void 0 ? void 0 : _flight$flights.length) - 1 || 0,\n        bookingUrl: flight.booking_token ? `https://www.google.com/travel/flights/booking?token=${flight.booking_token}` : this.generateSkyscannerUrl(flight),\n        source: 'serpapi'\n      };\n    });\n  }\n  formatBackendResults(flights, params) {\n    return flights.map((flight, index) => ({\n      id: `backend_${index}`,\n      airline: flight.airline || 'Unknown',\n      flightNumber: flight.flight_number || 'N/A',\n      price: flight.price || 'N/A',\n      departureTime: flight.departure_time || 'N/A',\n      arrivalTime: flight.arrival_time || 'N/A',\n      duration: flight.duration || 'N/A',\n      stops: flight.stops || 0,\n      bookingUrl: this.generateBookingUrl(flight, params),\n      source: 'scraping'\n    }));\n  }\n  generateBookingUrl(flight, params) {\n    var _flight$airline;\n    // Generate booking URL based on airline\n    const airline = (_flight$airline = flight.airline) === null || _flight$airline === void 0 ? void 0 : _flight$airline.toLowerCase();\n    if (airline !== null && airline !== void 0 && airline.includes('indigo')) {\n      return `https://www.goindigo.in/booking/flight-select?from=${params.origin}&to=${params.destination}&date=${params.departureDate}`;\n    } else if (airline !== null && airline !== void 0 && airline.includes('air india')) {\n      return `https://www.airindia.in/booking?from=${params.origin}&to=${params.destination}&date=${params.departureDate}`;\n    } else if (airline !== null && airline !== void 0 && airline.includes('spicejet')) {\n      return `https://www.spicejet.com/booking?from=${params.origin}&to=${params.destination}&date=${params.departureDate}`;\n    }\n    return this.generateSkyscannerUrl({\n      origin: params.origin,\n      destination: params.destination,\n      date: params.departureDate\n    });\n  }\n  generateSkyscannerUrl(params) {\n    const origin = this.getAirportCode(params.origin || 'DEL');\n    const destination = this.getAirportCode(params.destination || 'BOM');\n    const date = params.date || new Date().toISOString().split('T')[0];\n    return `https://www.skyscanner.co.in/transport/flights/${origin}/${destination}/${date.replace(/-/g, '')}/?adultsv2=1&children=0&adultsv2=1&childrenv2=&infants=0&cabinclass=economy`;\n  }\n  async getAirportCode(cityName) {\n    const airportCodes = {\n      'delhi': 'DEL',\n      'mumbai': 'BOM',\n      'bangalore': 'BLR',\n      'chennai': 'MAA',\n      'kolkata': 'CCU',\n      'hyderabad': 'HYD',\n      'pune': 'PNQ',\n      'ahmedabad': 'AMD',\n      'goa': 'GOI',\n      'kochi': 'COK',\n      'jaipur': 'JAI',\n      'lucknow': 'LKO',\n      'chandigarh': 'IXC',\n      'bhubaneswar': 'BBI',\n      'indore': 'IDR'\n    };\n    const normalizedCity = cityName.toLowerCase();\n    if (airportCodes[normalizedCity]) {\n      return airportCodes[normalizedCity];\n    }\n\n    // Use Gemini for unknown cities\n    try {\n      const response = await callGemini(`Analyze the city name \"${cityName}\" and return ONLY its IATA airport code in uppercase. \n      Example responses: DEL, BOM, BLR. No other text.`, {\n        temperature: 0.1\n      } // Lower temperature for precise answers\n      );\n      const iataMatch = response.text.match(/[A-Z]{3}/);\n      if (iataMatch) {\n        return iataMatch[0];\n      }\n      return normalizedCity.slice(0, 3).toUpperCase();\n    } catch (error) {\n      console.error('Gemini IATA lookup failed:', error);\n      return 'XXX';\n    }\n  }\n}\nexport const flightService = new FlightSearchService();","map":{"version":3,"names":["axios","callGemini","express","require","cors","app","FlightSearchService","constructor","serpApiKey","backendUrl","searchFlights","params","console","log","serpResults","searchWithSerpAPI","length","warn","error","scrapingResults","searchWithBackendScraping","departureId","getAirportCode","origin","arrivalId","destination","serpParams","engine","departure_id","arrival_id","outbound_date","departureDate","return_date","returnDate","currency","hl","api_key","response","get","timeout","data","best_flights","formatSerpAPIResults","post","date","passengers","class","success","flight_results","formatBackendResults","flights","map","flight","index","_flight$flights$","_flight$flights$2","_flight$price","_flight$flights$3","_flight$flights$3$dep","_flight$flights$4","_flight$flights$4$arr","_flight$flights","id","airline","flightNumber","flight_number","price","toLocaleString","departureTime","departure_airport","time","arrivalTime","arrival_airport","duration","total_duration","stops","bookingUrl","booking_token","generateSkyscannerUrl","source","departure_time","arrival_time","generateBookingUrl","_flight$airline","toLowerCase","includes","Date","toISOString","split","replace","cityName","airportCodes","normalizedCity","temperature","iataMatch","text","match","slice","toUpperCase","flightService"],"sources":["D:/Navikenz/pro/navihire/frontend/src/services/FlightService.ts"],"sourcesContent":["import axios from 'axios';\r\nimport { callGemini } from '../utils/gemini';\r\n\r\nconst express = require('express')\r\nconst cors = require('cors')\r\nconst app = express()\r\n\r\ninterface FlightSearchParams {\r\n  origin: string;\r\n  destination: string;\r\n  departureDate: string;\r\n  returnDate?: string;\r\n  passengers?: number;\r\n  class?: string;\r\n}\r\n\r\ninterface FlightResult {\r\n  id: string;\r\n  airline: string;\r\n  flightNumber: string;\r\n  price: string;\r\n  departureTime: string;\r\n  arrivalTime: string;\r\n  duration: string;\r\n  stops: number;\r\n  bookingUrl: string;\r\n  source: 'serpapi' | 'scraping' | 'fallback';\r\n}\r\n\r\nclass FlightSearchService {\r\n  private serpApiKey = \"0a9b0abe47e6107ce612664a0e582e40fc7cc91bdd1b42181cd56b2073c83fa0\";\r\n  private backendUrl = 'http://localhost:8000';\r\n\r\n  async searchFlights(params: FlightSearchParams): Promise<FlightResult[]> {\r\n    console.log('Searching flights with params:', params);\r\n\r\n    // Try SerpAPI first\r\n    if (this.serpApiKey) {\r\n      try {\r\n        const serpResults = await this.searchWithSerpAPI(params);\r\n        if (serpResults.length > 0) {\r\n          console.log('SerpAPI results found:', serpResults.length);\r\n          return serpResults;\r\n        }\r\n        else console.warn('Serp Result length is zero');\r\n      } catch (error) {\r\n        console.warn('SerpAPI failed:', error);\r\n      }\r\n    }\r\n    else {console.warn('Problem with serpApi key')};\r\n\r\n    // Try backend scraping\r\n    try {\r\n      const scrapingResults = await this.searchWithBackendScraping(params);\r\n      if (scrapingResults.length > 0) {\r\n        console.log('Backend scraping results found:', scrapingResults.length);\r\n        return scrapingResults;\r\n      }\r\n    } catch (error) {\r\n      console.warn('Backend scraping failed:', error);\r\n    }\r\n\r\n    // If all methods fail, return empty array (no fallback data)\r\n    console.log('All flight search methods failed');\r\n    return [];\r\n  }\r\n\r\n  private async searchWithSerpAPI(params: FlightSearchParams): Promise<FlightResult[]> {\r\n    \r\n    const departureId = await this.getAirportCode(params.origin);\r\n    const arrivalId = await this.getAirportCode(params.destination);\r\n    \r\n    const serpParams = {\r\n      engine: 'google_flights',\r\n      departure_id: departureId,\r\n      arrival_id: arrivalId,\r\n      outbound_date: params.departureDate,\r\n      return_date: params.returnDate,\r\n      currency: 'INR',\r\n      hl: 'en',\r\n      api_key: this.serpApiKey\r\n    };\r\n\r\n    const response = await axios.get('https://serpapi.com/search', {\r\n      params: serpParams,\r\n      timeout: 10000\r\n    });\r\n\r\n    if (response.data.best_flights) {\r\n      return this.formatSerpAPIResults(response.data.best_flights);\r\n    }\r\n\r\n    return [];\r\n  }\r\n\r\n  private async searchWithBackendScraping(params: FlightSearchParams): Promise<FlightResult[]> {\r\n    const response = await axios.post(`${this.backendUrl}/api/v1/flights/search`, {\r\n      origin: params.origin,\r\n      destination: params.destination,\r\n      date: params.departureDate,\r\n      passengers: params.passengers || 1,\r\n      class: params.class || 'economy'\r\n    }, {\r\n      timeout: 15000\r\n    });\r\n\r\n    if (response.data.success && response.data.flight_results) {\r\n      return this.formatBackendResults(response.data.flight_results, params);\r\n    }\r\n\r\n    return [];\r\n  }\r\n\r\n  private formatSerpAPIResults(flights: any[]): FlightResult[] {\r\n    return flights.map((flight, index) => ({\r\n      id: `serp_${index}`,\r\n      airline: flight.flights[0]?.airline || 'Unknown',\r\n      flightNumber: flight.flights[0]?.flight_number || 'N/A',\r\n      price: `₹${flight.price?.toLocaleString() || 'N/A'}`,\r\n      departureTime: flight.flights[0]?.departure_airport?.time || 'N/A',\r\n      arrivalTime: flight.flights[0]?.arrival_airport?.time || 'N/A',\r\n      duration: flight.total_duration || 'N/A',\r\n      stops: flight.flights?.length - 1 || 0,\r\n      bookingUrl: flight.booking_token ? \r\n        `https://www.google.com/travel/flights/booking?token=${flight.booking_token}` :\r\n        this.generateSkyscannerUrl(flight),\r\n      source: 'serpapi'\r\n    }));\r\n  }\r\n\r\n  private formatBackendResults(flights: any[], params: FlightSearchParams): FlightResult[] {\r\n    return flights.map((flight, index) => ({\r\n      id: `backend_${index}`,\r\n      airline: flight.airline || 'Unknown',\r\n      flightNumber: flight.flight_number || 'N/A',\r\n      price: flight.price || 'N/A',\r\n      departureTime: flight.departure_time || 'N/A',\r\n      arrivalTime: flight.arrival_time || 'N/A',\r\n      duration: flight.duration || 'N/A',\r\n      stops: flight.stops || 0,\r\n      bookingUrl: this.generateBookingUrl(flight, params),\r\n      source: 'scraping'\r\n    }));\r\n  }\r\n\r\n  private generateBookingUrl(flight: any, params: FlightSearchParams): string {\r\n    // Generate booking URL based on airline\r\n    const airline = flight.airline?.toLowerCase();\r\n    \r\n    if (airline?.includes('indigo')) {\r\n      return `https://www.goindigo.in/booking/flight-select?from=${params.origin}&to=${params.destination}&date=${params.departureDate}`;\r\n    } else if (airline?.includes('air india')) {\r\n      return `https://www.airindia.in/booking?from=${params.origin}&to=${params.destination}&date=${params.departureDate}`;\r\n    } else if (airline?.includes('spicejet')) {\r\n      return `https://www.spicejet.com/booking?from=${params.origin}&to=${params.destination}&date=${params.departureDate}`;\r\n    }\r\n    \r\n    return this.generateSkyscannerUrl({ origin: params.origin, destination: params.destination, date: params.departureDate });\r\n  }\r\n\r\n  private generateSkyscannerUrl(params: any): string {\r\n    const origin = this.getAirportCode(params.origin || 'DEL');\r\n    const destination = this.getAirportCode(params.destination || 'BOM');\r\n    const date = params.date || new Date().toISOString().split('T')[0];\r\n    \r\n    return `https://www.skyscanner.co.in/transport/flights/${origin}/${destination}/${date.replace(/-/g, '')}/?adultsv2=1&children=0&adultsv2=1&childrenv2=&infants=0&cabinclass=economy`;\r\n  }\r\n\r\n  private async getAirportCode(cityName: string): Promise<string> {\r\n  const airportCodes: { [key: string]: string } = {\r\n    'delhi': 'DEL',\r\n    'mumbai': 'BOM',\r\n    'bangalore': 'BLR',\r\n    'chennai': 'MAA',\r\n    'kolkata': 'CCU',\r\n    'hyderabad': 'HYD',\r\n    'pune': 'PNQ',\r\n    'ahmedabad': 'AMD',\r\n    'goa': 'GOI',\r\n    'kochi': 'COK',\r\n    'jaipur': 'JAI',\r\n    'lucknow': 'LKO',\r\n    'chandigarh': 'IXC',\r\n    'bhubaneswar': 'BBI',\r\n    'indore': 'IDR'\r\n  };\r\n\r\n  const normalizedCity = cityName.toLowerCase();\r\n\r\n  if (airportCodes[normalizedCity]) {\r\n    return airportCodes[normalizedCity];\r\n  }\r\n\r\n  // Use Gemini for unknown cities\r\n  try {\r\n    const response = await callGemini(\r\n      `Analyze the city name \"${cityName}\" and return ONLY its IATA airport code in uppercase. \r\n      Example responses: DEL, BOM, BLR. No other text.`,\r\n      { temperature: 0.1 } // Lower temperature for precise answers\r\n    );\r\n\r\n    const iataMatch = response.text.match(/[A-Z]{3}/);\r\n    if (iataMatch) {\r\n      return iataMatch[0];\r\n    }\r\n    \r\n    return normalizedCity.slice(0, 3).toUpperCase();\r\n    \r\n  } catch (error) {\r\n    console.error('Gemini IATA lookup failed:', error);\r\n    return 'XXX';\r\n  }\r\n}\r\n}\r\n\r\nexport const flightService = new FlightSearchService();\r\nexport type { FlightResult, FlightSearchParams };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}